{"version":3,"sources":["../../../src/preset/utils/getSourceMapPlugin.ts"],"names":["getSourceMapPlugin","bundleConfig","serverConfig","baseOptions","test","module","sourceMap","webpack","EvalSourceMapDevToolPlugin","publicPath","host","port","SourceMapDevToolPlugin","filename","moduleFilenameTemplate","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAMe,SAASA,kBAAT,CACbC,YADa,EAEbC,YAFa,EAGb;AAAA;AACA,QAAMC,WAAW,2BAAG;AAClBC,IAAAA,IAAI,EAAE,0CADY;AAElBC,IAAAA,MAAM,EAAE;AAFU,GAAH,CAAjB;AADA;;AAMA,MAAIJ,YAAY,CAACK,SAAb,KAA2B,QAA/B,EAAyC;AAAA;AAAA;AACvC,WAAO,IAAIC,iBAAQC,0BAAZ,CAAuC,EAC5C,GAAGL,WADyC;AAE5CM,MAAAA,UAAU,EAAG,UAASP,YAAY,CAACQ,IAAK,IAAGR,YAAY,CAACS,IAAK;AAFjB,KAAvC,CAAP;AAID,GALD,MAKO;AAAA;AAAA;;AAAA,QAAIV,YAAY,CAACK,SAAjB,EAA4B;AAAA;AAAA;AACjC,aAAO,IAAIC,iBAAQK,sBAAZ,CAAmC,EACxC,GAAGT,WADqC;AAExCU,QAAAA,QAAQ,EAAE,YAF8B;AAGxCC,QAAAA,sBAAsB,EAAE;AAHgB,OAAnC,CAAP;AAKD,KANM;AAAA;AAAA;AAMN;;AAjBD;AAmBA,SAAOC,SAAP;AACD","sourcesContent":["import webpack from 'webpack';\nimport {\n  NormalizedServerConfig,\n  NormalizedBundleConfig,\n} from '../../config/types';\n\nexport default function getSourceMapPlugin(\n  bundleConfig: NormalizedBundleConfig,\n  serverConfig: NormalizedServerConfig\n) {\n  const baseOptions = {\n    test: /\\.(js|jsx|css|ts|tsx|(js)?bundle)($|\\?)/i,\n    module: true,\n  };\n\n  if (bundleConfig.sourceMap === 'inline') {\n    return new webpack.EvalSourceMapDevToolPlugin({\n      ...baseOptions,\n      publicPath: `http://${serverConfig.host}:${serverConfig.port}/`,\n    } as webpack.EvalSourceMapDevToolPluginOptions);\n  } else if (bundleConfig.sourceMap) {\n    return new webpack.SourceMapDevToolPlugin({\n      ...baseOptions,\n      filename: '[file].map',\n      moduleFilenameTemplate: '[absolute-resource-path]',\n    });\n  }\n\n  return undefined;\n}\n"],"file":"getSourceMapPlugin.js"}