{"version":3,"sources":["../../src/utils/getBundleDataFromURL.ts"],"names":["getBundleDataFromURL","url","name","type","platform","path","file","startsWith","baseUrl","filename","exec","undefined","Error","match","filePath","segments","split","length","slice","join"],"mappings":"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","sourcesContent":["type BundleData = {\n  name: string;\n  type: string;\n  platform?: string;\n  path: string;\n};\n\nexport default function getBundleDataFromURL(url: string): BundleData {\n  let name: string;\n  let type: string;\n  let platform: string | undefined;\n  let path: string | undefined;\n  let file: string;\n\n  if (url.startsWith('http')) {\n    const [, baseUrl, filename] = /^(https?:\\/\\/.+\\/)(.+)$/.exec(url) || [\n      '',\n      undefined,\n      undefined,\n    ];\n    if (!baseUrl || !filename) {\n      throw new Error(`${url} is not a valid bundle URL`);\n    }\n\n    path = baseUrl;\n    platform = (filename.match(/platform=([a-zA-Z]*)/) || ['', undefined])[1];\n    file = (filename.match(/^([^?]+)/) || ['', ''])[1];\n  } else {\n    const [, filePath, filename] = /(.*\\/)?([^/]+)$/.exec(url) || [\n      '',\n      '',\n      undefined,\n    ];\n    if (!filename) {\n      throw new Error(`${url} is not a valid bundle URL`);\n    }\n\n    file = filename;\n    path = filePath;\n  }\n\n  const segments = file.split('.');\n  if (segments.length > 2) {\n    name = segments.slice(0, segments.length - 2).join('.');\n    platform = segments[segments.length - 2];\n    type = segments[segments.length - 1];\n  } else {\n    [name, type] = segments;\n  }\n\n  return {\n    name,\n    type,\n    platform,\n    path: path || '',\n  };\n}\n"],"file":"getBundleDataFromURL.js"}