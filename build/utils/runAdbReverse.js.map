{"version":3,"sources":["../../src/utils/runAdbReverse.ts"],"names":["runAdbReverse","runtime","port","androidHome","process","env","ANDROID_HOME","adb","command","Promise","resolve","error","message","split","logger","warn","trim","done"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAGe,SAASA,aAAT,CACbC,OADa,EAEbC,IAFa,EAGgB;AAAA;AAC7B,QAAMC,WAAW,0BAAGC,OAAO,CAACC,GAAR,CAAYC,YAAf,CAAjB;AACA,QAAMC,GAAG,0BAAGJ,WAAW,6BAAI,GAAEA,WAAY,qBAAlB,8BAAyC,KAAzC,CAAd,CAAT;AACA,QAAMK,OAAO,0BAAI,GAAED,GAAI,gBAAeL,IAAK,QAAOA,IAAK,EAA1C,CAAb;AAH6B;AAK7B,SAAO,IAAIO,OAAJ,CAAYC,OAAO,IAAI;AAAA;AAAA;AAC5B,6BAAKF,OAAL,EAAcG,KAAK,IAAI;AAAA;AAAA;;AACrB,UAAIA,KAAJ,EAAW;AAAA;AACT;AACA,cAAMC,OAAO,0BAAG,0BAAAD,KAAK,CAACC,OAAN,CAAcC,KAAd,CAAoB,QAApB,EAA8B,CAA9B,gCAAoCF,KAAK,CAACC,OAA1C,CAAH,CAAb;AAFS;AAGTX,QAAAA,OAAO,CAACa,MAAR,CAAeC,IAAf,CAAqB,kBAAiBP,OAAQ,MAAKI,OAAO,CAACI,IAAR,EAAe,EAAlE;AAHS;AAITN,QAAAA,OAAO;AAJE;AAKT;AACD,OAND;AAAA;AAAA;;AADqB;AAQrBT,MAAAA,OAAO,CAACa,MAAR,CAAeG,IAAf,CAAqB,qBAAoBT,OAAQ,EAAjD;AARqB;AASrBE,MAAAA,OAAO;AACR,KAVD;AAWD,GAZM,CAAP;AAaD","sourcesContent":["import { exec } from 'child_process';\nimport Runtime from '../runtime/Runtime';\n\nexport default function runAdbReverse(\n  runtime: Runtime,\n  port: number\n): Promise<string | undefined> {\n  const androidHome = process.env.ANDROID_HOME;\n  const adb = androidHome ? `${androidHome}/platform-tools/adb` : 'adb';\n  const command = `${adb} reverse tcp:${port} tcp:${port}`;\n\n  return new Promise(resolve => {\n    exec(command, error => {\n      if (error) {\n        // Get just the error message\n        const message = error.message.split('error:')[1] || error.message;\n        runtime.logger.warn(`Failed to run: ${command} - ${message.trim()}`);\n        resolve();\n        return;\n      }\n      runtime.logger.done(`Successfully run: ${command}`);\n      resolve();\n    });\n  });\n}\n"],"file":"runAdbReverse.js"}